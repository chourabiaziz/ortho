{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
			font: 18px / 1.5 sans-serif;
		}
		.example-wrapper code {
			background: #F5F5F5;
			padding: 2px 6px;
		}
	</style>


	<div class="pagetitle">
		<h1>Dashboard</h1>
		 
	</div>
	<!-- End Page Title -->

	<section class="section dashboard">
		<div
			class="row">

			<!-- Left side columns -->
			<div class="col-lg-8">
				<div
					class="row">
<div class="col-xxl-4 col-md-6">
						<div class="card info-card revenue-card">

							<div class="filter">
								 
							</div>

							<div class="card-body">
								<h5 class="card-title">Revenue
 								</h5>

								<div class="d-flex align-items-center">
									<div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
										<i class="bi bi-currency-dollar"></i>
									</div>
									<div class="ps-3">
										<h6>{{totale}} | TND</h6>
 
									</div>
								</div>
							</div>

						</div>
					</div>
					 

					<!-- Revenue Card -->
					
					<!-- End Revenue Card -->

					<!-- Customers Card -->
					<div class="col-xxl-4 col-xl-12">

						<div class="card info-card customers-card">

			 
							<div class="card-body">
								<h5 class="card-title">Nombre totale des clients
 								</h5>

								<div class="d-flex align-items-center">
									<div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
										<i class="bi bi-people"></i>
									</div>
									<div class="ps-3">
										<h6>{{nbclient}}</h6>
  
									</div>
								</div>

							</div>
						</div>

					</div>
					<!-- End Customers Card -->

					<!-- Reports -->
					<div class="col-12">
						<div class="card">
 

							<div class="card-body">
								<h5 class="card-title">Reports
									<span>/Today</span>
								</h5>

								<!-- Line Chart -->
								<div id="reportsChart"></div>

								<script>
						document.addEventListener("DOMContentLoaded", () => {
    new ApexCharts(document.querySelector("#reportsChart"), {
        series: [
            {
                name: 'Somme en TND',
                data: {{ table2|raw }}
            }
        ],
        chart: {
            height: 350,
            type: 'area',
            toolbar: {
                show: false
            }
        },
        markers: {
            size: 4
        },
        colors: [
            '#4154f1', '#2eca6a', '#ff771d'
        ],
        fill: {
            type: "gradient",
            gradient: {
                shadeIntensity: 1,
                opacityFrom: 0.3,
                opacityTo: 0.4,
                stops: [0, 90, 100]
            }
        },
        dataLabels: {
            enabled: false
        },
        stroke: {
            curve: 'smooth',
            width: 2
        },
        xaxis: {
            type: 'category',
            categories: {{ table1|raw }},
        },
        
    }).render();
});

								</script>
								<!-- End Line Chart -->

							</div>

						</div>
					</div>
					<!-- End Reports -->

					<!-- Recent Sales -->
				 
					<!-- End Recent Sales -->

					<!-- Top Selling -->
					<div class="col-12">
						<div class="card top-selling overflow-auto">

			 
							<div class="card-body pb-0">
								<h5 class="card-title">Classement des Orthophoniste les plus active 
 								</h5>

								<table class="table table-borderless">
									<thead>
										<tr>
											<th scope="col">Image</th>
											<th scope="col">Nom</th>
 											<th scope="col">Matricule</th>
											<th scope="col">E-mail</th>
										</tr>
									</thead>
									<tbody>
										{% for user in users %}
										{% if user.matricule %}
											
 																				<tr>

											<th scope="row">
												<a href="#"><img   src="{{ asset('images/user/' ~ user.image) }}"  style="border-radius: 50px;" height="50px" width="50px"  alt=""></a>
											</th>	
																					<td class="fw-bold">{{user.nom}}</td>
			
												 
										<td class="fw-bold">{{user.matricule}}</td>
										<td>
												<a href="#" class="text-primary fw-bold"> {{user.email}} </a>
											</td>
	</tr>{% endif %}
										{% endfor %}
											
											
											 
									
									 
									</tbody>
								</table>

							</div>

						</div>
					</div>
					<!-- End Top Selling -->

				</div>
			</div>
			<!-- End Left side columns -->

			<!-- Right side columns -->
			<div
				class="col-lg-4">

				<!-- Recent Activity -->
				<div class="card">
		 
					<div class="card-body">
						<h5 class="card-title">DÃ©rniere notification
 						</h5>

						<div class="activity">
	{% for x in notifications %}
							<div class="activity-item d-flex">
							
								<div class="activite-label"></div>
								<i class='bi bi-circle-fill activity-badge text-primary align-self-start'></i>
								<div class="activity-content">
								
 									<a   class="fw-bold text-dark">{{x.description}}</a>
 								
								
								</div>
									
							</div>
							{% endfor %}
							<!-- End activity item-->

						 
							<!-- End activity item-->
 
							<!-- End activity item-->

						 
							 

						</div>

					</div>
				</div>
				 

			</div>
			<!-- End Right side columns -->

		</div>
	</section>

	<!-- End #main -->

{% endblock %}
